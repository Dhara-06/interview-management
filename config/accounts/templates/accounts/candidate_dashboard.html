<!DOCTYPE html>
<html>
<head>
    <title>Candidate Dashboard</title>
</head>
<body>

<h2>Welcome Candidate ğŸ‘©â€ğŸ“</h2>

<h3>Available Interviews</h3>

{% if interviews %}
    <form id="select-interview" method="get" action="">
        <label for="interview">Choose a skill set / interview:</label>
        <select id="interview" name="interview">
            <option value="">-- select --</option>
            {% for interview in interviews %}
                <option value="{{ interview.id }}">{{ interview.title }} â€” {{ interview.required_skills|truncatechars:40 }}</option>
            {% endfor %}
        </select>
        <button type="button" id="start-btn">Start Test</button>
    </form>

    <ul>
        {% for interview in interviews %}
            <li>
                <strong>{{ interview.title }}</strong><br>
                {{ interview.required_skills|truncatechars:100 }}<br>
                <a href="/interviews/{{ interview.id }}/">Details</a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No interviews available right now.</p>
{% endif %}

<script>
document.getElementById('start-btn').addEventListener('click', function(){
    var sel = document.getElementById('interview');
    var id = sel.value;
    if(!id){ alert('Select an interview first'); return; }
    // Redirect to interview session start
    window.location.href = '/interviews/' + id + '/start/';
});
</script>

<a href="{% url 'logout' %}">Logout</a>


</body>
</html>
