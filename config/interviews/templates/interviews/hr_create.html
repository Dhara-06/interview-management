<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Create Interview | AI Interviewer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body{ background: linear-gradient(180deg,#f8fafc,#f1f5f9); }
      .card-hero{ background: linear-gradient(90deg,#2563eb,#7c3aed); color:#fff }
      .form-label{ font-weight:600; }
      .card .card-body{ padding:2.25rem; }
      .help-text{ color:#6b7280; font-size:0.9rem; }
      .btn-gradient{ background: linear-gradient(90deg,#2563eb,#7c3aed); border:0; color:#fff }
      .header-band{ background: linear-gradient(90deg,#06b6d4,#7c3aed); color:#fff; padding:1.25rem; border-top-left-radius: .375rem; border-top-right-radius: .375rem; }
      .header-band h3{ margin:0; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">AI Interviewer</a>
        <div>
          <a class="btn btn-outline-primary me-2" href="{% url 'hr_dashboard' %}">Dashboard</a>
        </div>
      </div>
    </nav>

    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="card shadow-sm">
            <div class="card-body">
              <div class="header-band mb-3">
                <h3>Create Interview</h3>
                <div class="small">Define the role, skills and evaluation criteria for this interview.</div>
              </div>

              {% if messages %}
                {% for message in messages %}
                  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
              {% endif %}

              <form method="post">
                {% csrf_token %}

                <div class="row g-3">
                  <div class="col-md-6">
                    <label class="form-label">{{ form.title.label }}</label>
                    {{ form.title }}
                    <div class="help-text">Short title for the interview (e.g., Frontend Developer).</div>
                    {% if form.title.errors %}<div class="text-danger small">{{ form.title.errors }}</div>{% endif %}
                  </div>

                  <div class="col-md-6">
                    <label class="form-label">{{ form.number_of_questions.label }}</label>
                    {{ form.number_of_questions }}
                    <div class="help-text">How many questions should the interview include?</div>
                    {% if form.number_of_questions.errors %}<div class="text-danger small">{{ form.number_of_questions.errors }}</div>{% endif %}
                  </div>

                  <div class="col-12">
                    <label class="form-label">{{ form.description.label }}</label>
                    {{ form.description }}
                    <div class="help-text">A brief description to guide the AI question generation.</div>
                    {% if form.description.errors %}<div class="text-danger small">{{ form.description.errors }}</div>{% endif %}
                  </div>

                  <div class="col-12">
                    <label class="form-label">{{ form.required_skills.label }}</label>
                    {{ form.required_skills }}
                    <div class="help-text">Comma-separated skills (e.g., React, CSS, JavaScript).</div>
                    {% if form.required_skills.errors %}<div class="text-danger small">{{ form.required_skills.errors }}</div>{% endif %}
                  </div>

                  <div class="col-12">
                    <label class="form-label">{{ form.responsibilities.label }}</label>
                    {{ form.responsibilities }}
                    <div class="help-text">Key responsibilities or context for the role (optional).</div>
                    {% if form.responsibilities.errors %}<div class="text-danger small">{{ form.responsibilities.errors }}</div>{% endif %}
                  </div>

                  <div class="col-12">
                    <label class="form-label">{{ form.evaluation_criteria.label }}</label>
                    {{ form.evaluation_criteria }}
                    <div class="help-text">Describe scoring / rubric to guide AI evaluation (optional).</div>
                    {% if form.evaluation_criteria.errors %}<div class="text-danger small">{{ form.evaluation_criteria.errors }}</div>{% endif %}
                  </div>
                </div>

                <div class="mt-4 d-flex justify-content-end">
                  <button type="submit" class="btn btn-gradient">Create Interview</button>
                </div>
              </form>

            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Apply Bootstrap classes and helpful attributes to rendered form widgets
      document.addEventListener('DOMContentLoaded', function(){
        const form = document.querySelector('form');
        if(!form) return;

        form.querySelectorAll('input, textarea, select').forEach(function(el){
          if(!el.classList.contains('form-control') && el.tagName.toLowerCase() !== 'select') el.classList.add('form-control');
          if(el.tagName.toLowerCase() === 'select') el.classList.add('form-select');
        });

        // make textareas a bit taller for readability
        form.querySelectorAll('textarea').forEach(function(t){ t.rows = Math.max(3, (t.rows || 3)); });

        // autofocus title if present
        const title = document.getElementById('id_title'); if(title) title.focus();

        // constrain number_of_questions
        const num = document.getElementById('id_number_of_questions');
        if(num){ num.min = 1; num.max = 50; }
      });
    </script>
  </body>
</html>
