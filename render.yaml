services:
  # Django Web Service
  - type: web
    name: ai-interviewer
    env: python
    plan: free
    pythonVersion: 3.11
    buildCommand: "pip install -r requirements.txt && python config/manage.py collectstatic --noinput"
    startCommand: "gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
    healthCheckPath: /admin/
    autoDeploy: true
    
    # Environment variables
    envVars:
      - key: DEBUG
        value: False
      - key: SECRET_KEY
        generateValue: true
      - key: ALLOWED_HOSTS
        value: .onrender.com
      - key: SECURE_SSL_REDIRECT
        value: True
      - key: SESSION_COOKIE_SECURE
        value: True
      - key: CSRF_COOKIE_SECURE
        value: True
      - key: GOOGLE_API_KEY
        sync: false

  # PostgreSQL Database (optional - uncomment to use)
  # - type: postgres
  #   name: ai-interviewer-db
  #   plan: free
  #   ipAllowList: []
