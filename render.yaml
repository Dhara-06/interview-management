services:
  # Django Web Service
  - type: web
    name: ai-interviewer
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt && python config/manage.py migrate && python config/manage.py collectstatic --noinput"
    startCommand: "gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
    healthCheckPath: /admin/
    autoDeploy: true
    
    # Environment variables
    envVars:
      - key: DEBUG
        value: False
      - key: SECRET_KEY
        generateValue: true
      - key: ALLOWED_HOSTS
        value: interview-management-4.onrender.com,.onrender.com
      - key: SECURE_SSL_REDIRECT
        value: True
      - key: SESSION_COOKIE_SECURE
        value: True
      - key: CSRF_COOKIE_SECURE
        value: True
      - key: GOOGLE_API_KEY
        value: AIzaSyDOiMr_X5FKkMAeOHxZJwQ1qXoAA-EAhks

  # PostgreSQL Database (optional - uncomment to use)
  # - type: postgres
  #   name: ai-interviewer-db
  #   plan: free
  #   ipAllowList: []
